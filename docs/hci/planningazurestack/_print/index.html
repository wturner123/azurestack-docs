<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.124.0">
<link rel="canonical" type="text/html" href="https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/">
<link rel="alternate" type="application/rss&#43;xml" href="https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="https://dell.github.io/azurestack-docs/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="https://dell.github.io/azurestack-docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="https://dell.github.io/azurestack-docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="https://dell.github.io/azurestack-docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://dell.github.io/azurestack-docs/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="https://dell.github.io/azurestack-docs/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="https://dell.github.io/azurestack-docs/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="https://dell.github.io/azurestack-docs/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://dell.github.io/azurestack-docs/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="https://dell.github.io/azurestack-docs/favicons/android-192x192.png" sizes="192x192">

<title>Planning Azure Stack | Solutions for Microsoft Azure Stack</title>
<meta name="description" content="Dell Technologies (Dell) Azure Stack documentation pages">
<meta property="og:title" content="Planning Azure Stack" />
<meta property="og:description" content="Dell Technologies (Dell) Azure Stack documentation pages" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/" />
<meta itemprop="name" content="Planning Azure Stack">
<meta itemprop="description" content="Dell Technologies (Dell) Azure Stack documentation pages"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Planning Azure Stack"/>
<meta name="twitter:description" content="Dell Technologies (Dell) Azure Stack documentation pages"/>



<link rel="preload" href="https://dell.github.io/azurestack-docs/scss/main.min.f28669251d295836018a6bbf5273ec7f332a49449f7c4fed679c156d07249b58.css" as="style">
<link href="https://dell.github.io/azurestack-docs/scss/main.min.f28669251d295836018a6bbf5273ec7f332a49449f7c4fed679c156d07249b58.css" rel="stylesheet" integrity="">


<link id="dark-mode-theme" rel="stylesheet" href="https://dell.github.io/azurestack-docs/css/dark.css" />

<script>
    function disableDarkTheme(mode) {
        if (mode === "light") {
            var darkTheme = document.getElementById("dark-mode-theme");

            darkTheme.disabled = true;
        }

        localStorage.setItem("dark-mode-storage", mode);
    }

    
    var savedTheme = localStorage.getItem("dark-mode-storage") || "light";
    disableDarkTheme(savedTheme);
</script>
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://dell.github.io/azurestack-docs/css/prism.css"/>
<link disabled id="prism-night-owl" rel="stylesheet" href="https://dell.github.io/azurestack-docs/css/prism-nightowl.css">
<link id="home-page-override" rel="stylesheet" href="https://dell.github.io/azurestack-docs/css/homepage.css">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-PXKTSNG8VW"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-PXKTSNG8VW', { 'anonymize_ip': false });
}
</script>

  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="https://dell.github.io/azurestack-docs/">
		<span class="navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1017 132"><defs><style>.cls-1{fill:#fff}</style></defs><title>DellTech_Logo_Prm_Wht_rgb</title><path class="cls-1" d="M1015 84.89c0-12.23-6.8-17.66-20.39-20.38s-21.73-4.08-21.73-13.58c0-6.8 5.44-10.87 15-10.87 12.22.0 16.3 5.43 16.3 12.22l1.36 1.36h5.43l1.37-1.36c0-13.58-10.88-19-24.46-19-15 0-23.1 8.15-23.1 17.67.0 10.86 8.15 16.3 21.73 19s20.38 4.08 20.38 15c0 6.79-4.07 12.23-17.66 12.23-12.22.0-17.66-6.8-17.66-15l-1.35-1.36h-5.44l-1.35 1.36c0 12.23 9.5 21.74 25.8 21.74 17.66.0 25.82-8.15 25.82-19M956.58 71.31l1.36-1.37V65.87c0-19-10.87-32.61-29.89-32.61s-29.89 13.59-29.89 32.61v2.72c0 19 9.51 35.32 31.25 35.32 19 0 25.81-12.23 27.17-20.38l-1.36-1.36h-5.43l-1.36 1.36c-2.72 8.15-8.16 13.59-19 13.59-17.66.0-23.1-16.31-23.1-24.46l1.36-1.35zm-8.15-6.8H907.67l-1.36-1.36c0-9.51 5.44-23.09 21.74-23.09s21.74 13.58 21.74 23.09zm-59.78 36.68V36l-1.36-1.35h-5.43L880.5 36v65.22l1.36 1.36h5.43zm0-78.8V14.24l-1.36-1.36h-5.43l-1.36 1.36v8.15l1.36 1.36h5.43zM837 97.12c-13.59.0-21.74-9.52-21.74-28.53S823.44 40.06 837 40.06s21.73 9.5 21.73 28.53S850.61 97.12 837 97.12M858.76 93c0 17.66-4.07 31.25-20.38 31.25-12.22.0-16.3-5.44-17.66-12.23l-1.35-1.36h-5.44l-1.36 1.36c1.36 10.87 9.51 19 25.81 19 17.67.0 28.53-10.87 28.53-38V36l-1.35-1.35h-4.08L860.12 36l-1.36 8.16H857.4c-2.71-5.43-9.5-10.87-21.74-10.87-19 0-28.53 15-28.53 35.33s9.52 35.32 28.53 35.32c12.24.0 19-5.43 21.74-10.87zm-88.3-53c13.58.0 23.09 10.87 23.09 28.53S784 97.12 770.46 97.12s-23.1-10.87-23.1-28.53 9.51-28.53 23.1-28.53m0 63.85c17.66.0 31.25-12.23 31.25-35.32s-13.59-35.33-31.25-35.33-31.25 12.23-31.25 35.33 13.59 35.32 31.25 35.32m-40.76-2.72V8.81l-1.36-1.36h-5.43l-1.36 1.36v92.38l1.36 1.36h5.43zM680.8 40.06c13.58.0 23.09 10.87 23.09 28.53s-9.51 28.53-23.09 28.53-23.1-10.87-23.1-28.53 9.51-28.53 23.1-28.53m0 63.85c17.66.0 31.25-12.23 31.25-35.32S698.46 33.26 680.8 33.26s-31.25 12.23-31.25 35.33 13.59 35.32 31.25 35.32m-39.4-2.72V60.43c0-17.66-9.51-27.17-24.45-27.17-9.52.0-17.67 4.08-21.74 10.87h-1.36L592.49 36l-1.36-1.35h-4.08L585.7 36v65.22l1.35 1.36h5.44l1.36-1.36V64.51c0-15 6.79-24.45 21.73-24.45 10.87.0 17.66 6.79 17.66 20.37v40.76l1.37 1.36H640zm-69.29.0V60.43c0-17.66-9.51-27.17-24.45-27.17-9.52.0-17.66 4.08-21.74 10.87h-1.36V8.81L523.2 7.45h-5.43l-1.36 1.36v92.38l1.36 1.36h5.43l1.36-1.36V64.51c0-15 6.8-24.45 21.74-24.45 10.87.0 17.66 6.79 17.66 20.37v40.76l1.36 1.36h5.44zM455.28 68.59c0-19 9.5-28.53 23.09-28.53s19 8.15 20.38 16.29l1.35 1.37h5.44l1.36-1.37c-1.36-13.58-12.23-23.09-28.53-23.09-17.66.0-31.24 10.87-31.24 35.33s13.58 35.32 31.24 35.32c16.3.0 27.17-9.51 28.53-23.1l-1.36-1.36H500.1l-1.35 1.36C497.39 89 492 97.12 478.37 97.12s-23.09-9.52-23.09-28.53m-14.95 2.72 1.36-1.37V65.87c0-19-10.87-32.61-29.9-32.61s-29.88 13.59-29.88 32.61v2.72c0 19 9.51 35.32 31.25 35.32 19 0 25.81-12.23 27.17-20.38L439 82.17h-5.43l-1.36 1.36c-2.72 8.15-8.15 13.59-19 13.59-17.66.0-23.1-16.31-23.1-24.46l1.36-1.35zm-8.15-6.8H391.42l-1.36-1.36c0-9.51 5.44-23.09 21.73-23.09s21.75 13.58 21.75 23.09zM395.57 12.88V8.81l-1.36-1.36H323.56L322.2 8.81v4.07l1.36 1.36h29.89l1.36 1.36v85.59l1.36 1.36h5.43l1.36-1.36V15.6l1.36-1.36h29.89z"/><path class="cls-1" d="M322.2 83.65v18.9H260.85V7.45h21.6v76.2zM38.55 102.55A47.57 47.57.0 0084.58 67l53.8 42 53.77-42v35.56H253.5V83.65H213.75V7.45h-21.6V43L140.58 83.3l-11.54-9L153.73 55l26.89-21-15.35-12-51.58 40.3-11.53-9L153.73 13 138.38 1 84.58 43a47.57 47.57.0 00-46-35.58H0v95.1zM21.6 83.65V26.35H38.55c14.33.0 26 12.83 26 28.65s-11.67 28.65-26 28.65z"/></svg></span><span class="font-weight-bold">Solutions for Microsoft Azure Stack</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="https://dell.github.io/azurestack-docs/docs/" ><span class="active">Dell Technologies Solutions for Microsoft Azure Stack</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/dell/azurestack-docs" target="_blank" ><i class='fab fa-github fa-lg'></i><span>GitHub</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://dell.github.io/azurestack-docs/" ><i id='dark-mode-toggle' class='fa fa-moon'></i><span>Dark</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"><input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="https://dell.github.io/azurestack-docs/azurestack-docs/offline-search-index.6da7239078179da58d0dd42466bbc575.json"
  data-offline-search-base-href="https://dell.github.io/azurestack-docs/"
  data-offline-search-max-results="10"
>
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Planning Azure Stack</h1>





  
  <nav id="TableOfContents"></nav>
  


<div class="content">
      <p>This documentation is written from a Sys-Admin point of view as an addition to the official documentation, with the intent to demonstrate to IT Professionals how it compares to traditional solutions and Windows Server with a focus on Dell portfolio.</p>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-621954cfadda09a4d3375d3e768cffd3">1 - 01. Operating System</h1>
    
	<h1 id="planning-operating-system">Planning Operating System</h1>
<p>Storage Spaces Direct is technology, that is contained in both Azure Stack HCI OS and Windows Server Datacenter. It enables you to create hyperconverged cluster as there is a software storage bus, that enables every cluster node to access all physical disks in cluster.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/01-operating-system/PPT02.png
"></p>
<h2 id="familiar-for-it">Familiar for IT</h2>
<p>Both operating systems are easy to use for Windows Server admins that are familiar with failover clustering as both systems are using traditional technologies (Failover Clustering, Hyper-V) while domain joined. Therefore all tools (such as Server Manager, MMC and Windows Admin Center) can be used for management.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/01-operating-system/OSManagement.png
"></p>
<h2 id="hyper-converged-infrastructure-stack">Hyper-Converged infrastructure stack</h2>
<p>Both Azure Stack HCI and Windows Server are using the same technology that is well known since Windows Server 2016 - Storage Spaces Direct. Storage Spaces Direct enables all servers to see all disks from every node, therefore Storage Spaces stack can define resiliency and place data (slabs) in different fault domains. In this case nodes. Since all is happening in software, devices like high-speed NVMe disks can be used and shared using software stack using high-speed RDMA network adapters.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/01-operating-system/PPT04.png
"></p>
<h2 id="delivered-as-an-azure-hybrid-service">Delivered as an Azure hybrid service</h2>
<p>The difference between both products is in way the service is consumed. With Windows Server, it&rsquo;s traditional &ldquo;buy and forget&rdquo; model, where you can have operating system that is supported for 5+5 years (main+extended support) and you can pay upfront (OEM License, EA License &hellip;). Azure Stack HCI licensing can be dynamic. Imagine investing into the system where you have 40 cores/node, but you will initially use 16 cores only - you can easily configure number of cores in DELL systems using Openmanage Integration in Windows Admin Center and then pay only for how much you consume.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/01-operating-system/WAC01.png
"></p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/01-operating-system/WAC02.png
"></p>
<p>Additionally you can purchase Windows Server licenses as <a href="https://learn.microsoft.com/en-us/azure-stack/hci/manage/vm-activate#windows-server-subscription">subscription add-on</a></p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/01-operating-system/Portal01.png
"></p>
<h2 id="os-lifecycle">OS Lifecycle</h2>
<p>The main difference is the way features are developed for each platform. Windows Server follows traditional development cycle (new version every 2.5-3years), while Azure Stack HCI follows cloud development cycle together with Windows Client OS (new version every year).</p>
<p>As result, <a href="https://learn.microsoft.com/en-us/azure-stack/hci/concepts/compare-windows-server#compare-technical-features">new features</a> are developed and delivered into Azure Stack HCI OS every year.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/01-operating-system/PPT03.png
"></p>
<p>While both Windows Server and Azure Stack HCI operating systems can run on virtualization host, going forward the main focus will be Azure Stack HCI OS for hosts and Windows Server for guest workloads. For more information see the video below.
<div style="position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden;">
    <iframe
        src="https://www.youtube-nocookie.com/embed/EWv5JUHDR1k?start=423&end="
        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen frameborder="0"
        title="YouTube Video"></iframe>
</div>
</p>
<p>Comparison of Azure Stack HCI and Windows Server is available <a href="https://learn.microsoft.com/en-us/azure-stack/hci/concepts/compare-windows-server">in official docs</a>.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/01-operating-system/PPT01.png
"></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fbe8aaf5ebeaf94c0b576b815a44e40a">2 - 02. Supporting Infrastructure</h1>
    
	<h1 id="planning-supporting-infrastructure">Planning Supporting Infrastructure</h1>
<p>There are several deployment sizes. Let&rsquo;s split it into three main categories. While all three categories can be managed just with one management machine and PowerShell, with more clusters or racks, management of the infrastructure can be very complex task. We can assume, that with Azure Stack HCI hybrid capabilities, will more infrastructure move into cloud.</p>
<p>In many cases we hear, that due to security, DHCP is not allowed in server subnet. Limiting what server can receive IP address can be done with <a href="https://learn.microsoft.com/en-us/powershell/module/dhcpserver/add-dhcpserverv4filter">MAC Address Filtering</a>.</p>
<p>Management infrastructure can be deployed in separate domain from hosted virtual machines to further increase security.</p>
<p>Management machine can be also deployed as <a href="https://learn.microsoft.com/en-us/windows-server/identity/securing-privileged-access/privileged-access-workstations">Privileged Access Workstation</a>.</p>
<h2 id="minimum-infrastructure">Minimum infrastructure</h2>
<p>The minimum components are Domain Controller and Management machine. Management machine can be Windows 10 or Windows Server at least the same version as the managed server (for example Windows 10 1809 and newer can manage Windows Server 2019). DHCP server can significantly help as managed servers can receive IP address. That means you can manage them remotely without logging into servers to configure static IP, but it&rsquo;s not mandatory.</p>
<p>Windows Admin Center can be installed on Admin Workstation. From there, infrastructure can be managed using Windows Admin Center, PowerShell or legacy remote management tools (such as mmc).</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/02-supporting-infrastructure/MinimumInfrastructure01.png
"></p>
<h2 id="medium-infrastructure">Medium infrastructure</h2>
<p>Medium infrastructure assumes you have multiple administrators and/or multiple clusters in your environment. Another servers dedicated for management can be introduced to help with management centralization or automating management.</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/windows-server/manage/windows-admin-center/deploy/install#install-on-server-core">Installing Windows Admin Center in Gateway Mode</a></li>
<li><a href="https://learn.microsoft.com/en-us/system-center/vmm/plan-install?view=sc-vmm-2019">Planning SCVMM Installation</a></li>
</ul>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/02-supporting-infrastructure/MediumInfrastructure01.png
"></p>
<h2 id="large-scale-infrastructure">Large Scale infrastructure</h2>
<p>Large Infrastructure assumes that you have more clusters spanning multiple racks or even sites. To help with bare-metal deployment, network management, patch management is SCVMM essential. Supporting roles (WSUS, WDS, Library servers) managed by SCVMM can be deployed across multiple servers. SCVMM supports deployment in HA Mode (Active-Passive) with SQL server Always On. DHCP is mandatory for bare-metal deployment as during PXE boot, server needs to obtain IP Address.</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/system-center/vmm/plan-ha-install?view=sc-vmm-2019">Planning HA SCVMM Installation</a></li>
</ul>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/02-supporting-infrastructure/LargeScaleInfrastructure01.png
"></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9eba56a4b228eb8325698f2c35de1e83">3 - 03. Planning Deployment Models and Workloads</h1>
    
	<h1 id="planning-deployment-models-and-workloads">Planning Deployment Models and Workloads</h1>
<p>Depending on size, usage and complexity of the environment you need to design what deployment model for Azure Stack HCI you want to choose. HyperConvered deployment is the simplest. It&rsquo;s great for it&rsquo;s simplicity, however for specialized tasks (like CPU/RAM consuming Virtual Machines) with moderate/high storage workload it might be more effective to split CPU/RAM intensive workload and storage into Converged deployment.</p>
<h2 id="hyperconverged-deployments">HyperConverged deployments</h2>
<p>HyperConverged deployments can be small as 2 nodes connected directly with network cable and grow to multi-PB 16 node clusters (unlike traditional clusters, where limit is 64 nodes). Minimum requirements are described in <a href="https://learn.microsoft.com/en-us/windows-server/storage/storage-spaces/storage-spaces-direct-hardware-requirements">hardware requirements doc</a>.</p>
<p>Simplicity is the main benefit in this deployment model. All hardware is standardized and from one vendor, therefore there is a high chance that there are hundreds of customers with exact same configuration. This significantly helps with troubleshooting. There are no extra hops compared to SAN, where some IOs are going over FC infrastructure and some over LAN (CSV redirection).</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/03-deployment-models-and-workloads/HyperConvergedModel01.png
"></p>
<h2 id="converged-deployments">Converged deployments</h2>
<p>Converged deployments have separate AzSHCI cluster with Scale-Out File Server role installed. Multiple compute clusters (up to 64 nodes each) can access single Scale-Out File Server. This design allows to use both Datacenter and Standard licenses for Compute Clusters.</p>
<p>This design adds some complexity as Virtual Machines are accessing its storage over network. Main benefit is, that one VM consuming all CPU cycles will not affect other VMs because of degraded storage performance and also you can scale storage independently from RAM and CPU (if you run out of cpu, no need to buy server loaded with storage). This design allows higher density, better deduplication job schedule and decreased east-west traffic (as VMs are pointed to it&rsquo;s CSV owner node using Witness Service or new <a href="https://techcommunity.microsoft.com/t5/failover-clustering/scale-out-file-server-improvements-in-windows-server-2019/ba-p/372156">SMB Connections move on connect</a>).</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/03-deployment-models-and-workloads/ConvergedModel01.png
"></p>
<h2 id="cluster-sets">Cluster Sets</h2>
<p>If multiple clusters are using multiple Scale-Out FileServers or even if multiple HyperConverged clusters are present, cluster sets helps putting all clusters under one namespace and allows to define fault domains. When VM is created, fault domain can be used (instead of pointing VM to specific node/cluster).</p>
<p>Technically all VMs are located on SOFS share that is presented using DFS-N namespace. This namespace is hosted on Management cluster that does not need any shared storage as all configuration data are in registry.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/03-deployment-models-and-workloads/ClusterSets01.png
"></p>
<h2 id="user-profile-disks-host">User Profile Disks host</h2>
<p>Azure Stack HCI can also host user profile disks (UPDs). Since UPD is VHD (both native Windows Server functionality and <a href="https://github.com/microsoft/MSLab/tree/master/Scenarios/FSLogix">FSLogix</a>), Scale-Out File Server can be used as workload pattern is the same as for Virtual Machines. However it might make sense to use fileserver hosted Virtual Machine.</p>
<h2 id="sql">SQL</h2>
<p>There are multiple ways to deploy SQL Server on Azure Stack HCI cluster. But in the end there are two main - Deploying a SQL Server in a Virtual Machine, or in AKS (Azure Kubernetes Service) as SQL Managed instance.</p>
<blockquote>
<p>SQL Performance in one Virtual Machine (out of 40 on 4 node cluster) running SQL workload (database forced to read from disk)</p>
</blockquote>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/03-deployment-models-and-workloads/SQLPerformanceVM.png
"></p>
<h2 id="kubernetes">Kubernetes</h2>
<p>TBD</p>
<h2 id="vdi">VDI</h2>
<p>TBD</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-3a7a3d1dbf329cffb6bef9a8a838ae27">4 - 04. Planning Network Architecture</h1>
    
	<h1 id="planning-network-architecture">Planning Network Architecture</h1>
<p>To correctly plan infrastructure design is key part in Azure Stack HCI planning. With incorrect configuration, the infrastructure might not be reliable under load. Depending on scale more complex solution might make sense to better control traffic.</p>
<p>In general there are two types of traffic - East-West and North-South. East-West is handled by SMB protocol (all traffic generated by Storage Bus Layer and Live Migration). North-South is mostly traffic generated by Virtual Machines.</p>
<p>Physicals switches should be configured with native VLAN for management traffic. This will significantly help as without configuring VLAN on physical host, you will be able to communicate over network. This helps bare metal deployment and also helps with Virtual Switch creation when management network is using vNIC.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/pswitch01.png
"></p>
<p>In text above were several abbreviations used. Let&rsquo;s explain few.</p>
<ul>
<li>pSwitch = Physical Switch. It&rsquo;s your Top of the rack Switch (TOR)</li>
<li>vSwitch = Virtual Switch. It is switch, that is created on host using New-VMSwitch command</li>
<li>vNIC = Virtual Network Adapter. It is a vNIC that is connected to Management OS (to parent partition). This is the NIC that is usually used for management or SMB.</li>
<li>vmNIC = Virtual Machine Network Adapter. This is a vNIC connected to Virtual Machine.</li>
</ul>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/topology00.png
"></p>
<h2 id="topology-design">Topology design</h2>
<h3 id="single-subnet">Single subnet</h3>
<p>In Windows Server 2016 was support for single subnet multichannel in cluster support added. This allows to configure only single subnet for multiple network adapters dedicated for SMB Traffic. It is recommended topology design for smaller deployments, where interconnection between TOR switches can handle at least 50% network throughput generated by nodes (as there is 50% chance, that traffic travel using switch interconnect - m-LAG). For example with 4 nodes each node 2 times 25Gbps connections, you should have at least 100Gbps connection between TOR switches.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/topology01.png
"></p>
<p>TOR Switches will be configured with Trunk and native (access) VLAN for management.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/topology02.png
"></p>
<h3 id="two-subnets">Two subnets</h3>
<p>With increased number of nodes, there might be a congestion in TOR switches interconnect. Also in case congestion will happen and pause frame will be sent, both switches will be paused. To mitigate both, you can configure 2 subnets - each network switch will host separate subnet. This also brings one benefit - in converged setup if connection fails, it will be visible in failover cluster manager. m-LAG is optional if switches are dedicated for East-West (SMB) only. In this case as there is no traffic generated from SMB multichannel as each SMB adapter is in different subnet. In case VMs or any other traffic is using it, m-LAG is required.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/topology03.png
"></p>
<p>TOR Switches will be configured with Trunk and native (access) VLAN for management with one slight difference from single subnet. Each subnet for SMB traffic will have it&rsquo;s own VLAN. This will also help discover disconnected physical connections (<a href="https://youtu.be/JxKMSqnGwKw?t=204">https://youtu.be/JxKMSqnGwKw?t=204</a>).</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/topology04.png
"></p>
<blockquote>
<p>Note: Two subnet deployment is being now standard. Same approach is used when <a href="https://learn.microsoft.com/en-us/azure-stack/hci/deploy/network-atc">NetworkATC</a> is deployed.</p>
</blockquote>
<h3 id="direct-connections-switchless">Direct connections (Switchless)</h3>
<p>In Windows Server 2019 you can connect all nodes in mesh mode. In case you have 2 nodes, it&rsquo;s just one connection. With 3 nodes, it&rsquo;s 3 interconnects. With 5 nodes, it whoops to 10. For 2 or 3 nodes design it makes sense to use 2 connections between 2 nodes in case one link goes down (for example cable failure). This would result traffic going over slower connection (like 1Gb if North-South is using Gigabit network links). Dell supports up to 4 nodes in switchless configuration.</p>
<p>The math is simple. With 5 nodes its 4+3+2+1=10. Each connection requires separate subnet.</p>
<pre><code class="language-powershell"># Calculation for number of connections
$NumberOfNodes = 5
(1..($NumberOfNodes - 1) | Measure-Object -Sum).Sum
</code></pre>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/connections01.gif
"></p>
<h2 id="rdma-protocols">RDMA Protocols</h2>
<p>RDMA is not required for Azure Stack HCI, but it is highly recommended. It has lower latency as traffic is using hardware data path (application can send data directly to hardware using DMA).</p>
<p>Great resources explaining benefit of RDMA:</p>
<ul>
<li><a href="https://techcommunity.microsoft.com/t5/storage-at-microsoft/to-rdma-or-not-to-rdma-8211-that-is-the-question/ba-p/425982">Blog comparing storage performance with and without RDMA</a></li>
<li><a href="https://channel9.msdn.com/Blogs/Regular-IT-Guy/Behind-the-Scenes-with-Storage-Replica-and-RDMA">RDMA protocol deep dive video</a></li>
</ul>
<p>There are multiple flavors of RDMA. The most used in Azure Stack HCI are RoCEv2 and iWARP. Infiniband can be used also, but just for SMB traffic (NICs cannot be connected to vSwitch).</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/RDMA01.png
"></p>
<h3 id="iwarp">iWARP</h3>
<p>iWARP is using TCP for transport. This is bit easier to configure as it uses TCP for Congestion Control. Configuring DCB/ETS is not mandatory. For larger deployments it is recommended as traffic can be prioritized.</p>
<p>Some network vendors require to configure Jumbo Frames to 9014.</p>
<h3 id="roce">RoCE</h3>
<p>RoCE is using UDP for transport. It is mandatory to enable DCB (PFC/ETS) and ECN on both physical NICs and physical network infrastructure.</p>
<p>If congestion control mechanisms are not correctly implemented, it can lead to huge retransmits. This can lead to infrastructure instabilities and storage disconnections. It is crucial to configure this correctly.</p>
<p><strong>where DCB needs to be configured</strong></p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/dcb01.png
"></p>
<h2 id="virtual-switch-and-virtual-network-adapters">Virtual Switch and Virtual Network adapters</h2>
<h3 id="converged-design">Converged Design</h3>
<p>This design is most common as it is simplest and requires just two ports. Since RDMA can be enabled on vNICs. In the example below is one VLAN used for SMB vNICs. As mentioned in above text, you may consider using two VLANs and two subnets for SMB vNICs to control traffic flow as it is becoming standard.</p>
<p>Converged design also makes best use of capacity (let&rsquo;s say you have 4x25Gbps NICs), you can then use up to 100Gbps capacity for storage or Virtual Machines, while using latest technology such as <a href="https://learn.microsoft.com/en-us/windows-hardware/drivers/network/overview-of-virtual-machine-multiple-queues">VMMQ</a>.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/topology04.png
"></p>
<h3 id="dedicated-nics-for-east-west-traffic">Dedicated NICs for East-West traffic</h3>
<p>Some customers prefer to dedicate physical network adapters for east west traffic. In example below all physical ports on physical switch are configured the same (for simplicity). Also just two physical switches are used. You can also have dedicated switches for east-west traffic (for SMB). If DCB is configured, VLANs are mandatory for SMB adapters. In example below one VLAN for SMB is used. Two VLANs and two subnets can be used to better control traffic.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/topology05.png
"></p>
<h3 id="dedicated-nics-for-east-west-traffic-and-management">Dedicated NICs for East-West traffic and management</h3>
<p>Some customers even prefer to have dedicated network cards (ports) for management. One of the reason can be customers requirements to have dedicated physical switches for management.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/topology06.png
"></p>
<h2 id="network-adapters-hardware">Network adapters hardware</h2>
<p>Network adapters that support all modern features such as VMMQ or SDN offloading are in Hardware Compatibility list listed as <strong>Software-Defined Data Center (SDDC) Premium</strong> Additional Qualifier. For more information about Hardware Certification for Azure Stack HCI you can read this 2 part blog -
<a href="https://blogs.technet.microsoft.com/windowsserver/2018/02/20/the-technical-value-of-wssd-validated-hci-solutions-part-1/">part1</a>, <a href="https://blogs.technet.microsoft.com/windowsserver/2018/02/21/the-technical-value-of-validated-hci-solutions-part-2/">part2</a>.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/04-network-architecture/SDDC01.png
"></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b56f15df841768569bc812367b455f71">5 - 05. Storage Capacity Planning</h1>
    
	<h1 id="planning-capacity">Planning capacity</h1>
<h2 id="capacity-reserve">Capacity reserve</h2>
<p>When disk failure happens, it is necessary to have some capacity reserve to have immediate capacity to rebuild to. So for example if one disk in one node disconnects, there will be reserved capacity to have required number of copies (2 copies in 2-way mirror, 3 copies in 3-way mirror).</p>
<p>It is recommended to have largest disk capacity in each node not occupied - reserved. For calculation you can use <a href="http://aka.ms/s2dcalc">http://aka.ms/s2dcalc</a>. It is not necessary to mark disk as &ldquo;reserved&rdquo; or anything like that as it all about not consuming capacity of one disk.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/capacity01.gif
"></p>
<p>Since we regular maintenance is required (security patches), reboot might be necessary. Or for example if any hardware upgrade is done (for example increasing RAM), node might need to be put into maintenance mode or even shut down. If VMs are required to run, then there has to be capacity (RAM) to keep VMs running on rest of the nodes.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/capacity02.gif
"></p>
<p>With more than 5 nodes it might make sense to reserve entire node. You will have capacity for VMs when node in maintenance, and you will be also able to rebuild if one node is completely lost - assuming all disks damaged (which is usually unlikely to happen as usually just one component fails and can be replaced withing service agreement).</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/capacity03.gif
"></p>
<h2 id="resiliency-options">Resiliency options</h2>
<h3 id="mirror-two-way-and-three-way">Mirror (two-way and three-way)</h3>
<p>Two-way mirroring writes two copies of everything. Its storage efficiency is 50% - to write 1TB of data, you need at least 2TB of physical storage capacity. Likewise, you need at least two fault domains. By default, fault domain is Storage Scale Unit (which translates into server node). Fault domain can be also Chassis or Rack. Therefore if you have two node cluster, two-way mirroring will be used.</p>
<p>With three-way mirror, the storage efficiency is 33.3% - to write 1TB of data, you need at least 3TB of physical storage capacity. Likewise you need to have at least three fault domains. If you have 3 nodes, by default three-way mirror will be used.</p>
<h3 id="dual-parity">Dual-parity</h3>
<p>Dual parity implements Reed-Solomon error-correcting codes to keep two bitwise parity symbols, thereby providing the same fault tolerance as three-way mirroring (i.e. up to two failures at once), but with better storage efficiency. It most closely resembles RAID-6.
To use dual parity, you need at least four hardware fault domains – with Storage Spaces Direct, that means four servers. At that scale, the storage efficiency is 50% – to store 2 TB of data, you need 4 TB of physical storage capacity.</p>
<p>With increasing number of fault domains (nodes), local reconstruction codes, or LRC can be used. LRC can decrease rebuild times as only local (local group) parity can be used to rebuild data (there is one local and one global parity in dataset).</p>
<h3 id="mirror-accelerated-parity">Mirror-Accelerated Parity</h3>
<p>Spaces Direct volume can be part mirror and part parity. Writes land first in the mirrored portion and are gradually moved into the parity portion later. Effectively, this is using mirroring to accelerate erasure coding.</p>
<p>To mix three-way mirror and dual parity, you need at least four fault domains, meaning four servers.</p>
<p>The storage efficiency of mirror-accelerated parity is in between what you&rsquo;d get from using all mirror or all parity, and depends on the proportions you choose</p>
<h3 id="recommended-reading">Recommended reading</h3>
<p><a href="https://learn.microsoft.com/en-us/windows-server/storage/storage-spaces/storage-spaces-fault-tolerance">https://learn.microsoft.com/en-us/windows-server/storage/storage-spaces/storage-spaces-fault-tolerance</a></p>
<h2 id="scoped-volumes">Scoped volumes</h2>
<p>With increasing number of nodes it might be useful to put data only on selected nodes to better control what data will be accessible in case of failure of certain nodes. With scoped volumes, volumes can system tolerate more than 2 nodes failure while keeping volumes online.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/ScopedVolumes01.png
"></p>
<h2 id="cache-drives">Cache drives</h2>
<p>Faster media can be used as cache. If HDDs are used, cache devices are mandatory. Cache drives do not contribute to capacity.</p>
<p>For more information about cache visit <a href="https://learn.microsoft.com/en-us/windows-server/storage/storage-spaces/understand-the-cache">docs</a></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2f05a0386dbcf789bb26d2e6bf7ef4a9">6 - 06. Hardware</h1>
    
	<h1 id="planning-hardware">Planning hardware</h1>
<h2 id="cpu">CPU</h2>
<p>In hyperconverged systems, CPU handles both VMs and Storage. Rule of thumb is that each logical processor can handle ~60MiB IOPS. Let&rsquo;s calculate an exaple: four node cluster, each node two twelve-core CPUs results. If we consider 4k IOPS, each LP can handle ~15k IOPS. With 4 nodes, 24 LPs each it results in ~1.5M IOPS. All assuming that CPU is used for IO operations only.</p>
<h2 id="storage-devices">Storage devices</h2>
<p>In general, there are two kinds of devices - spinning media and solid state media disks. We all know this story as it&rsquo;s been some time we upgraded our PCs with SSDs and we were able to see the significant latency drop. There are two factors though - type of media (HDD or SSD) and type of bus (SATA, SAS, NVMe or Storage Class Memory -SCM).</p>
<p>HDD mediatype is always using SATA or SAS. And this type of bus was more than enough for it&rsquo;s purpose. With introduction of SSD mediatype, SATA/SAS started to show it&rsquo;s limitation. Namely with SATA/SAS you will utilize 100% of your CPU and you will not be able to reach more than ~300k IOPS. It&rsquo;s because SATA/SAS was designed for spinning media and also one controller connects multiple devices to one PCIe connection. NVMe was designed from scratch for low latency and parallelism and has dedicated connection to PCIe. Therefore NAND NVMe outperforms NAND SATA/SAS SSD drive.</p>
<p>Another significant leap was introduction of Intel Optane SSD, that introduces even lower latencies than NAND SSDs. And since in Optane media is bit addressable, there is no garbage to collect (on NAND SSD you erase only in blocks with negative performance impact).</p>
<p>Important piece when selecting storage devices is, that if you consider SSD+HDD combination, all heavy lifting will end up in one SATA/SAS controller connected into one PCIe slot. Therefore it&rsquo;s recommended to consider using NVMe instead, as each NVMe will have its PCIe line.</p>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/06-hardware/InterfaceEfficiency01.png
"></p>
<h2 id="network-cards">Network cards</h2>
<p>There are several considerations when talking about network cards.</p>
<h3 id="network-interface-speed">Network Interface Speed</h3>
<p>Network Cards are coming in speeds ranging from 1Gbps to 200Gbps. While hyperconverged infrastructure will work with 1Gbps, the performance will be limited. The requirement is to have at least one 10Gbps port per server. However it&rsquo;s recommended to have at least 2x10Gbps with RDMA enabled.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Mediatype</th>
<th style="text-align:left">Recommended NICs</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">SSD as cache or SSD all-flash</td>
<td style="text-align:left">2×10 Gbps or 2x25Gbps</td>
</tr>
<tr>
<td style="text-align:left">NVMe as cache</td>
<td style="text-align:left">2-4×25Gbps or 2×100Gbps</td>
</tr>
<tr>
<td style="text-align:left">NVMe all-flash</td>
<td style="text-align:left">2-4×25Gbps or 2×100Gbps</td>
</tr>
<tr>
<td style="text-align:left">Optane as cache</td>
<td style="text-align:left">2-4×100 Gbps or 2×200Gbps</td>
</tr>
</tbody>
</table>
<h3 id="use-of-rdma">Use of RDMA</h3>
<p>When RDMA is enabled, it will bypass networking stack and DMA directly into memory of NIC. This will significantly reduce CPU overhead. While RDMA is not mandatory, it&rsquo;s highly recommended for Azure Stack HCI as it will leave more CPU for Virtual Machines and Storage.</p>
<h3 id="rdma-protocol">RDMA protocol</h3>
<p>There are two flavors of RDMA. iWARP (TCP/IP) and RoCE (UDP). The main difference a need of lossless infrastructure for RoCE as when switch is loaded and starts dropping packets, it cannot prioritize or even notify infrastructure to stop sending packets if DCB/PFC/ETS is not configured. When packet is dropped on UDP, large retransmit needs to happen and this cause even higher load on switches. Retransmit will also happen on TCP/IP, but significantly smaller. It is still recommended to configure PFC/ETS on both if possible - in case switch needs to notify infrastructure to stop sending packets.</p>
<h2 id="network-infrastructure">Network infrastructure</h2>
<p>Reliable, low latency infrastructure is a must for reliable function of Converged and HyperConverged infrastructure. As already covered above, DCB (PFC nad ETS) is recommended for iWARP and required for RoCE. There is also alternative - starting Windows Server 2019, direct connection is supported. As you can see, it does not make sense to have more than 5 nodes in the cluster (with increasing number of interconnects)</p>
<table>
<thead>
<tr>
<th style="text-align:left">Number of nodes</th>
<th style="text-align:left">Number of direct connections</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left">6</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">10</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Note: Dell supports up to 4 nodes in switchless configuration</p>
</blockquote>
<h2 id="hardware-certification-programme">Hardware certification programme</h2>
<p>It is very important to follow validated hardware path. This way you can avoid ghost hunting when single component will misbehave due to firmware or even hardware not being able to handle load under high pressure. There is very good blog summarizing importance of validated hardware <a href="https://cloudblogs.microsoft.com/windowsserver/2018/02/20/the-technical-value-of-wssd-validated-hci-solutions-part-1/">part1</a> <a href="https://cloudblogs.microsoft.com/windowsserver/2018/02/21/the-technical-value-of-validated-hci-solutions-part-2/">part2</a>. Validated solutions are available in <a href="https://www.microsoft.com/en-us/cloud-platform/azure-stack-hci-catalog">Azure Stack HCI Catalog</a>. For Azure Stack HCI you can also consider <a href="https://hcicatalog.azurewebsites.net/#/?IntegratedSystem=Integrated+System">Integrated System</a> which includes the Azure Stack HCI operating system pre-installed as well as partner extensions for driver and firmware updates.</p>
<blockquote>
<p>Note: Dell sells only Integrated Systems as Microsoft highly recommend those over just verified solutions.</p>
</blockquote>
<p><img src="

https://dell.github.io/azurestack-docs/docs/hci/planningazurestack/06-hardware/PPT01.png
"></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/dell/azurestack-docs" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2024 The Dell Technologies All Rights Reserved</small>
        <small class="ml-1"><a href="https://www.dell.com/learn/us/en/uscorp1/policies-privacy" target="_blank" rel="noopener">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='https://dell.github.io/azurestack-docs/js/tabpane-persist.js'></script>




















<script src="https://dell.github.io/azurestack-docs/azurestack-docs/js/main.min.9f90c5deff5c6f69d5eaaf614a76a233d8b0b3ae70b942fc78919b6d08041034.js" integrity="sha256-n5DF3v9cb2nV6q9hSnaiM9iws65wuUL8eJGbbQgEEDQ=" crossorigin="anonymous"></script>



<script src='https://dell.github.io/azurestack-docs/js/prism.js'></script>

<script>

    var mainJS = document.querySelector('script[src*="js/main"]');

    var script = document.createElement("script");
    script.src = mainJS.src.replace('azurestack-docs/azurestack-docs', 'azurestack-docs');
    script.integrity = mainJS.integrity;
    script.crossOrigin = mainJS.crossOrigin;

    document.body.appendChild(script);

    var offlineSearch = document.querySelector('input[data-offline-search-index-json-src*="offline-search"]');
    offlineSearch.setAttribute('data-offline-search-index-json-src', offlineSearch.getAttribute('data-offline-search-index-json-src').replace('azurestack-docs/azurestack-docs', 'azurestack-docs'));

</script>

<script>
    

    var toggleIcon = document.getElementById("dark-mode-toggle");
    var toggleMenuItem = toggleIcon.parentElement;
    var toggleText = toggleMenuItem.childNodes[1]
    var nightOwlPrism = document.getElementById("prism-night-owl");
    var defaultPrism = $('link[href="https://dell.github.io/azurestack-docs/css/prism.css"]')[0].sheet

    if (toggleMenuItem) {
        toggleMenuItem.addEventListener("click", () => {
            if (toggleIcon.className === "fa fa-moon fa-lg") {
                setTheme("dark");
            } else if (toggleIcon.className === "fa fa-sun fa-lg") {
                setTheme("light");
            }
        });

        toggleMenuItem.removeAttribute("href")
    }

    function setTheme(mode) {
        localStorage.setItem("dark-mode-storage", mode);

        var darkTheme = document.getElementById("dark-mode-theme");

        if (mode === "dark") {
            darkTheme.disabled = false;
            nightOwlPrism.disabled = false;
            defaultPrism.disabled = true;
            toggleIcon.className = "fa fa-sun fa-lg";
            toggleText.textContent = "Light"
        } else if (mode === "light") {
            darkTheme.disabled = true;
            nightOwlPrism.disabled = true;
            defaultPrism.disabled = false;
            toggleIcon.className = "fa fa-moon fa-lg";
            toggleText.textContent = "Dark"
        }
    }

    
    var savedTheme = localStorage.getItem("dark-mode-storage") || "light";
    setTheme(savedTheme);
</script>


  </body>
</html>
