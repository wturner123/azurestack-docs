<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" type="text/html" href="https://wturner123.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/">
<link rel="alternate" type="application/rss&#43;xml" href="https://wturner123.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="https://wturner123.github.io/azurestack-docs/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="https://wturner123.github.io/azurestack-docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="https://wturner123.github.io/azurestack-docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="https://wturner123.github.io/azurestack-docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://wturner123.github.io/azurestack-docs/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="https://wturner123.github.io/azurestack-docs/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="https://wturner123.github.io/azurestack-docs/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="https://wturner123.github.io/azurestack-docs/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://wturner123.github.io/azurestack-docs/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="https://wturner123.github.io/azurestack-docs/favicons/android-192x192.png" sizes="192x192">

<title>05. Storage Capacity Planning | Solutions for Microsoft Azure Stack</title>
<meta name="description" content="Dell Technologies (Dell) Azure Stack documentation pages">
<meta property="og:url" content="https://wturner123.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/">
  <meta property="og:site_name" content="Solutions for Microsoft Azure Stack">
  <meta property="og:title" content="05. Storage Capacity Planning">
  <meta property="og:description" content="Planning capacity Capacity reserve When disk failure happens, it is necessary to have some capacity reserve to have immediate capacity to rebuild to. So for example if one disk in one node disconnects, there will be reserved capacity to have required number of copies (2 copies in 2-way mirror, 3 copies in 3-way mirror).
It is recommended to have largest disk capacity in each node not occupied - reserved. For calculation you can use http://aka.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="05. Storage Capacity Planning">
  <meta itemprop="description" content="Planning capacity Capacity reserve When disk failure happens, it is necessary to have some capacity reserve to have immediate capacity to rebuild to. So for example if one disk in one node disconnects, there will be reserved capacity to have required number of copies (2 copies in 2-way mirror, 3 copies in 3-way mirror).
It is recommended to have largest disk capacity in each node not occupied - reserved. For calculation you can use http://aka.">
  <meta itemprop="dateModified" content="2024-03-11T15:58:13+00:00">
  <meta itemprop="wordCount" content="626">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="05. Storage Capacity Planning">
  <meta name="twitter:description" content="Planning capacity Capacity reserve When disk failure happens, it is necessary to have some capacity reserve to have immediate capacity to rebuild to. So for example if one disk in one node disconnects, there will be reserved capacity to have required number of copies (2 copies in 2-way mirror, 3 copies in 3-way mirror).
It is recommended to have largest disk capacity in each node not occupied - reserved. For calculation you can use http://aka.">



<link rel="preload" href="https://wturner123.github.io/azurestack-docs/scss/main.min.9636db581f89711d5d596ec9d7ccf1aefd782b9b5c2f3a78527981e3f1523a44.css" as="style">
<link href="https://wturner123.github.io/azurestack-docs/scss/main.min.9636db581f89711d5d596ec9d7ccf1aefd782b9b5c2f3a78527981e3f1523a44.css" rel="stylesheet" integrity="">


<link id="dark-mode-theme" rel="stylesheet" href="https://wturner123.github.io/azurestack-docs/css/dark.css" />

<script>
    function disableDarkTheme(mode) {
        if (mode === "light") {
            var darkTheme = document.getElementById("dark-mode-theme");

            darkTheme.disabled = true;
        }

        localStorage.setItem("dark-mode-storage", mode);
    }

    
    var savedTheme = localStorage.getItem("dark-mode-storage") || "light";
    disableDarkTheme(savedTheme);
</script>
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://wturner123.github.io/azurestack-docs/css/prism.css"/>
<link disabled id="prism-night-owl" rel="stylesheet" href="https://wturner123.github.io/azurestack-docs/css/prism-nightowl.css">
<link id="home-page-override" rel="stylesheet" href="https://wturner123.github.io/azurestack-docs/css/homepage.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PXKTSNG8VW"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-PXKTSNG8VW');
}
</script>
  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="https://wturner123.github.io/azurestack-docs/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1017 132"><defs><style>.cls-1{fill:#fff}</style></defs><title>DellTech_Logo_Prm_Wht_rgb</title><path class="cls-1" d="M1015 84.89c0-12.23-6.8-17.66-20.39-20.38s-21.73-4.08-21.73-13.58c0-6.8 5.44-10.87 15-10.87 12.22.0 16.3 5.43 16.3 12.22l1.36 1.36h5.43l1.37-1.36c0-13.58-10.88-19-24.46-19-15 0-23.1 8.15-23.1 17.67.0 10.86 8.15 16.3 21.73 19s20.38 4.08 20.38 15c0 6.79-4.07 12.23-17.66 12.23-12.22.0-17.66-6.8-17.66-15l-1.35-1.36h-5.44l-1.35 1.36c0 12.23 9.5 21.74 25.8 21.74 17.66.0 25.82-8.15 25.82-19M956.58 71.31l1.36-1.37V65.87c0-19-10.87-32.61-29.89-32.61s-29.89 13.59-29.89 32.61v2.72c0 19 9.51 35.32 31.25 35.32 19 0 25.81-12.23 27.17-20.38l-1.36-1.36h-5.43l-1.36 1.36c-2.72 8.15-8.16 13.59-19 13.59-17.66.0-23.1-16.31-23.1-24.46l1.36-1.35zm-8.15-6.8H907.67l-1.36-1.36c0-9.51 5.44-23.09 21.74-23.09s21.74 13.58 21.74 23.09zm-59.78 36.68V36l-1.36-1.35h-5.43L880.5 36v65.22l1.36 1.36h5.43zm0-78.8V14.24l-1.36-1.36h-5.43l-1.36 1.36v8.15l1.36 1.36h5.43zM837 97.12c-13.59.0-21.74-9.52-21.74-28.53S823.44 40.06 837 40.06s21.73 9.5 21.73 28.53S850.61 97.12 837 97.12M858.76 93c0 17.66-4.07 31.25-20.38 31.25-12.22.0-16.3-5.44-17.66-12.23l-1.35-1.36h-5.44l-1.36 1.36c1.36 10.87 9.51 19 25.81 19 17.67.0 28.53-10.87 28.53-38V36l-1.35-1.35h-4.08L860.12 36l-1.36 8.16H857.4c-2.71-5.43-9.5-10.87-21.74-10.87-19 0-28.53 15-28.53 35.33s9.52 35.32 28.53 35.32c12.24.0 19-5.43 21.74-10.87zm-88.3-53c13.58.0 23.09 10.87 23.09 28.53S784 97.12 770.46 97.12s-23.1-10.87-23.1-28.53 9.51-28.53 23.1-28.53m0 63.85c17.66.0 31.25-12.23 31.25-35.32s-13.59-35.33-31.25-35.33-31.25 12.23-31.25 35.33 13.59 35.32 31.25 35.32m-40.76-2.72V8.81l-1.36-1.36h-5.43l-1.36 1.36v92.38l1.36 1.36h5.43zM680.8 40.06c13.58.0 23.09 10.87 23.09 28.53s-9.51 28.53-23.09 28.53-23.1-10.87-23.1-28.53 9.51-28.53 23.1-28.53m0 63.85c17.66.0 31.25-12.23 31.25-35.32S698.46 33.26 680.8 33.26s-31.25 12.23-31.25 35.33 13.59 35.32 31.25 35.32m-39.4-2.72V60.43c0-17.66-9.51-27.17-24.45-27.17-9.52.0-17.67 4.08-21.74 10.87h-1.36L592.49 36l-1.36-1.35h-4.08L585.7 36v65.22l1.35 1.36h5.44l1.36-1.36V64.51c0-15 6.79-24.45 21.73-24.45 10.87.0 17.66 6.79 17.66 20.37v40.76l1.37 1.36H640zm-69.29.0V60.43c0-17.66-9.51-27.17-24.45-27.17-9.52.0-17.66 4.08-21.74 10.87h-1.36V8.81L523.2 7.45h-5.43l-1.36 1.36v92.38l1.36 1.36h5.43l1.36-1.36V64.51c0-15 6.8-24.45 21.74-24.45 10.87.0 17.66 6.79 17.66 20.37v40.76l1.36 1.36h5.44zM455.28 68.59c0-19 9.5-28.53 23.09-28.53s19 8.15 20.38 16.29l1.35 1.37h5.44l1.36-1.37c-1.36-13.58-12.23-23.09-28.53-23.09-17.66.0-31.24 10.87-31.24 35.33s13.58 35.32 31.24 35.32c16.3.0 27.17-9.51 28.53-23.1l-1.36-1.36H500.1l-1.35 1.36C497.39 89 492 97.12 478.37 97.12s-23.09-9.52-23.09-28.53m-14.95 2.72 1.36-1.37V65.87c0-19-10.87-32.61-29.9-32.61s-29.88 13.59-29.88 32.61v2.72c0 19 9.51 35.32 31.25 35.32 19 0 25.81-12.23 27.17-20.38L439 82.17h-5.43l-1.36 1.36c-2.72 8.15-8.15 13.59-19 13.59-17.66.0-23.1-16.31-23.1-24.46l1.36-1.35zm-8.15-6.8H391.42l-1.36-1.36c0-9.51 5.44-23.09 21.73-23.09s21.75 13.58 21.75 23.09zM395.57 12.88V8.81l-1.36-1.36H323.56L322.2 8.81v4.07l1.36 1.36h29.89l1.36 1.36v85.59l1.36 1.36h5.43l1.36-1.36V15.6l1.36-1.36h29.89z"/><path class="cls-1" d="M322.2 83.65v18.9H260.85V7.45h21.6v76.2zM38.55 102.55A47.57 47.57.0 0084.58 67l53.8 42 53.77-42v35.56H253.5V83.65H213.75V7.45h-21.6V43L140.58 83.3l-11.54-9L153.73 55l26.89-21-15.35-12-51.58 40.3-11.53-9L153.73 13 138.38 1 84.58 43a47.57 47.57.0 00-46-35.58H0v95.1zM21.6 83.65V26.35H38.55c14.33.0 26 12.83 26 28.65s-11.67 28.65-26 28.65z"/></svg></span><span class="navbar-brand__name">Solutions for Microsoft Azure Stack</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="https://wturner123.github.io/azurestack-docs/docs/"><span>Dell Technologies Solutions for Microsoft Azure Stack</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/dell/azurestack-docs" target="_blank" rel="noopener"><i class='fab fa-github fa-lg'></i><span>GitHub</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://wturner123.github.io/azurestack-docs/"><i id='dark-mode-toggle' class='fa fa-moon'></i><span>Dark</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="https://wturner123.github.io/azurestack-docs/azurestack-docs/offline-search-index.9092f6cbbbe8da630f5f3c49eafe0268.json"
    data-offline-search-base-href="https://wturner123.github.io/azurestack-docs/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="https://wturner123.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">05. Storage Capacity Planning</h1>





  
  <nav id="TableOfContents">
  <ul>
    <li><a href="#capacity-reserve">Capacity reserve</a></li>
    <li><a href="#resiliency-options">Resiliency options</a>
      <ul>
        <li><a href="#mirror-two-way-and-three-way">Mirror (two-way and three-way)</a></li>
        <li><a href="#dual-parity">Dual-parity</a></li>
        <li><a href="#mirror-accelerated-parity">Mirror-Accelerated Parity</a></li>
        <li><a href="#recommended-reading">Recommended reading</a></li>
      </ul>
    </li>
    <li><a href="#scoped-volumes">Scoped volumes</a></li>
    <li><a href="#cache-drives">Cache drives</a></li>
  </ul>
</nav>
  


<div class="content">
      <h1 id="planning-capacity">Planning capacity</h1>
<h2 id="capacity-reserve">Capacity reserve</h2>
<p>When disk failure happens, it is necessary to have some capacity reserve to have immediate capacity to rebuild to. So for example if one disk in one node disconnects, there will be reserved capacity to have required number of copies (2 copies in 2-way mirror, 3 copies in 3-way mirror).</p>
<p>It is recommended to have largest disk capacity in each node not occupied - reserved. For calculation you can use <a href="http://aka.ms/s2dcalc">http://aka.ms/s2dcalc</a>. It is not necessary to mark disk as &ldquo;reserved&rdquo; or anything like that as it all about not consuming capacity of one disk.</p>
<p><img src="

https://wturner123.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/capacity01.gif
"></p>
<p>Since we regular maintenance is required (security patches), reboot might be necessary. Or for example if any hardware upgrade is done (for example increasing RAM), node might need to be put into maintenance mode or even shut down. If VMs are required to run, then there has to be capacity (RAM) to keep VMs running on rest of the nodes.</p>
<p><img src="

https://wturner123.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/capacity02.gif
"></p>
<p>With more than 5 nodes it might make sense to reserve entire node. You will have capacity for VMs when node in maintenance, and you will be also able to rebuild if one node is completely lost - assuming all disks damaged (which is usually unlikely to happen as usually just one component fails and can be replaced withing service agreement).</p>
<p><img src="

https://wturner123.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/capacity03.gif
"></p>
<h2 id="resiliency-options">Resiliency options</h2>
<h3 id="mirror-two-way-and-three-way">Mirror (two-way and three-way)</h3>
<p>Two-way mirroring writes two copies of everything. Its storage efficiency is 50% - to write 1TB of data, you need at least 2TB of physical storage capacity. Likewise, you need at least two fault domains. By default, fault domain is Storage Scale Unit (which translates into server node). Fault domain can be also Chassis or Rack. Therefore if you have two node cluster, two-way mirroring will be used.</p>
<p>With three-way mirror, the storage efficiency is 33.3% - to write 1TB of data, you need at least 3TB of physical storage capacity. Likewise you need to have at least three fault domains. If you have 3 nodes, by default three-way mirror will be used.</p>
<h3 id="dual-parity">Dual-parity</h3>
<p>Dual parity implements Reed-Solomon error-correcting codes to keep two bitwise parity symbols, thereby providing the same fault tolerance as three-way mirroring (i.e. up to two failures at once), but with better storage efficiency. It most closely resembles RAID-6.
To use dual parity, you need at least four hardware fault domains – with Storage Spaces Direct, that means four servers. At that scale, the storage efficiency is 50% – to store 2 TB of data, you need 4 TB of physical storage capacity.</p>
<p>With increasing number of fault domains (nodes), local reconstruction codes, or LRC can be used. LRC can decrease rebuild times as only local (local group) parity can be used to rebuild data (there is one local and one global parity in dataset).</p>
<h3 id="mirror-accelerated-parity">Mirror-Accelerated Parity</h3>
<p>Spaces Direct volume can be part mirror and part parity. Writes land first in the mirrored portion and are gradually moved into the parity portion later. Effectively, this is using mirroring to accelerate erasure coding.</p>
<p>To mix three-way mirror and dual parity, you need at least four fault domains, meaning four servers.</p>
<p>The storage efficiency of mirror-accelerated parity is in between what you&rsquo;d get from using all mirror or all parity, and depends on the proportions you choose</p>
<h3 id="recommended-reading">Recommended reading</h3>
<p><a href="https://learn.microsoft.com/en-us/windows-server/storage/storage-spaces/storage-spaces-fault-tolerance">https://learn.microsoft.com/en-us/windows-server/storage/storage-spaces/storage-spaces-fault-tolerance</a></p>
<h2 id="scoped-volumes">Scoped volumes</h2>
<p>With increasing number of nodes it might be useful to put data only on selected nodes to better control what data will be accessible in case of failure of certain nodes. With scoped volumes, volumes can system tolerate more than 2 nodes failure while keeping volumes online.</p>
<p><img src="

https://wturner123.github.io/azurestack-docs/docs/hci/planningazurestack/05-storage-capacity-planning/ScopedVolumes01.png
"></p>
<h2 id="cache-drives">Cache drives</h2>
<p>Faster media can be used as cache. If HDDs are used, cache devices are mandatory. Cache drives do not contribute to capacity.</p>
<p>For more information about cache visit <a href="https://learn.microsoft.com/en-us/windows-server/storage/storage-spaces/understand-the-cache">docs</a></p>

</div>
</div>


  
  
  
  

  
  

  


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/dell/azurestack-docs" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">The Dell Technologies</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><span class="ms-2"><a href="https://www.dell.com/learn/us/en/uscorp1/policies-privacy" target="_blank" rel="noopener">Privacy Policy</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="https://wturner123.github.io/azurestack-docs/azurestack-docs/js/main.min.69e2c1ae9320465ab10236d9ef752c6a4442c54b48b883b17c497b7c7d96a796.js" integrity="sha256-aeLBrpMgRlqxAjbZ73UsakRCxUtIuIOxfEl7fH2Wp5Y=" crossorigin="anonymous"></script>
<script src='https://wturner123.github.io/azurestack-docs/js/prism.js'></script>
<script src='https://wturner123.github.io/azurestack-docs/js/tabpane-persist.js'></script>
<script>

    var mainJS = document.querySelector('script[src*="js/main"]');

    var script = document.createElement("script");
    script.src = mainJS.src.replace('azurestack-docs/azurestack-docs', 'azurestack-docs');
    script.integrity = mainJS.integrity;
    script.crossOrigin = mainJS.crossOrigin;

    document.body.appendChild(script);

    var offlineSearch = document.querySelector('input[data-offline-search-index-json-src*="offline-search"]');
    offlineSearch.setAttribute('data-offline-search-index-json-src', offlineSearch.getAttribute('data-offline-search-index-json-src').replace('azurestack-docs/azurestack-docs', 'azurestack-docs'));

</script>

<script>
    

    var toggleIcon = document.getElementById("dark-mode-toggle");
    var toggleMenuItem = toggleIcon.parentElement;
    var toggleText = toggleMenuItem.childNodes[1]
    var nightOwlPrism = document.getElementById("prism-night-owl");
    var defaultPrism = $('link[href="https://wturner123.github.io/azurestack-docs/css/prism.css"]')[0].sheet

    if (toggleMenuItem) {
        toggleMenuItem.addEventListener("click", () => {
            if (toggleIcon.className === "fa fa-moon fa-lg") {
                setTheme("dark");
            } else if (toggleIcon.className === "fa fa-sun fa-lg") {
                setTheme("light");
            }
        });

        toggleMenuItem.removeAttribute("href")
    }

    function setTheme(mode) {
        localStorage.setItem("dark-mode-storage", mode);

        var darkTheme = document.getElementById("dark-mode-theme");

        if (mode === "dark") {
            darkTheme.disabled = false;
            nightOwlPrism.disabled = false;
            defaultPrism.disabled = true;
            toggleIcon.className = "fa fa-sun fa-lg";
            toggleText.textContent = "Light"
        } else if (mode === "light") {
            darkTheme.disabled = true;
            nightOwlPrism.disabled = true;
            defaultPrism.disabled = false;
            toggleIcon.className = "fa fa-moon fa-lg";
            toggleText.textContent = "Dark"
        }
    }

    
    var savedTheme = localStorage.getItem("dark-mode-storage") || "light";
    setTheme(savedTheme);
</script>

  </body>
</html>
